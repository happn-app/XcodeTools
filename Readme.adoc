= XcodeTools
François Lamboley <francois.lamboley@happn.com>

== What Is This?
A collection of utilities to work with Xcode files. Currently there are two
products in this SPM project.

=== XcodeProjKit
A reusable lib to work with xcodeproj files. Specifically the lib allows easy
parsing of pbxproj and xcconfig files. Schemes are not supported (yet).

Example of use:
[source,swift]
----
let xcodeproj = try XcodeProj(autodetectInFolderAtPath: "/path/to/project/")
try xcodeproj.iterateCombinedBuildSettingsOfTargets{ target, targetName, configurationName, combinedBuildSettings in
   print("\(targetName) - \(configurationName)")
   /* The line below returns the resolved value of the MARKETING_VERSION build
    * setting. All the rules I’m aware of (Xcode 12 beta 6) are followed,
    * including but not limited to:
    *    - Thorough xcconfig files parsing;
    *    - Embedded variables like so “$(VALUE_$(VARIANT))”;
    *    - Resolution of variable depending on build config levels (project config, then targets);
    *    - Other… */
   print(combinedBuildSettings["MARKETING_VERSION"])
}
----

_Note_: Parsing the parameters in a build configuration (e.g. `FOO[sdk=macosx*]`)
is supported, however, the resolution of the variables do not take the parameters
in account yet.

=== hagvtool
An executable to manage the versions in an Xcode project.

== References and Useful Links for Parsing the pbxproj & co
- http://www.monobjc.net/xcode-project-file-format.html
- https://pewpewthespells.com/blog/xcconfig_guide.html
- https://nshipster.com/xcconfig/
- https://stackoverflow.com/q/1393987
